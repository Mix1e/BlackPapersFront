<div class="container justify-content-center">
    <div class="row bootstrap snippets bootdeys m-5">
        <div class="col-md-11 col-sm-16">
            <div class="comment-wrapper">
                <div class="panel panel-info">
                    <textarea
                        [(ngModel)]="newComment.content"
                        class="form-control"
                        placeholder="Введите комментарий..."
                        rows="3"
                    ></textarea>
                    <br />
                    <button type="button" class="btn btn-outline-warning" (click)="addComment()">
                        Отправить
                    </button>
                    <div class="clearfix"></div>
                    <hr />
                    <div *ngIf="comments$ | async as comments">
                        <div *ngFor="let comment of comments">
                            <ul class="media-list">
                                <li class="media">
                                    <div class="row">
                                        <a
                                            routerLink="/viewers/{{ comment.viewer.nickName }}"
                                            class="pull-left col"
                                        >
                                            <img
                                                src="https://school2skopin.ru/wp-content/uploads/2021/08/unnamed.jpg"
                                                alt=""
                                                class="img-circle"
                                            />
                                            <strong class="text-success m-3">{{
                                                comment.viewer.nickName
                                            }}</strong>
                                        </a>
                                        <div
                                            class="col-1"
                                            *ngIf="
                                                role === '[ROLE_ADMIN]' ||
                                                comment.viewer.nickName === user ||
                                                paper.viewer.nickName === user
                                            "
                                        >
                                            <button
                                                (click)="deleteComment(comment.id)"
                                                type="button"
                                                class="btn btn-outline-danger btn-sm"
                                            >
                                                X
                                            </button>
                                        </div>
                                    </div>
                                    <div class="media-body">
                                        <span class="text-muted pull-right">
                                            <small class="text-muted">{{
                                                comment.dateOfUpdate | date : 'medium'
                                            }}</small>
                                            <small class="text-muted"
                                                >&nbsp;
                                                <button (click)="likeComment(comment)" type="button" class="btn btn-sm mb-1">
                                                    <svg
                                                        xmlns="http://www.w3.org/2000/svg"
                                                        width="16"
                                                        height="16"
                                                        fill="currentColor"
                                                        class="bi bi-box2-heart"
                                                        viewBox="0 0 16 16"
                                                    >
                                                        <path
                                                            d="M8 7.982C9.664 6.309 13.825 9.236 8 13 2.175 9.236 6.336 6.31 8 7.982Z"
                                                        />
                                                        <path
                                                            d="M3.75 0a1 1 0 0 0-.8.4L.1 4.2a.5.5 0 0 0-.1.3V15a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V4.5a.5.5 0 0 0-.1-.3L13.05.4a1 1 0 0 0-.8-.4h-8.5Zm0 1H7.5v3h-6l2.25-3ZM8.5 4V1h3.75l2.25 3h-6ZM15 5v10H1V5h14Z"
                                                        />
                                                    </svg>
                                                    {{ comment.likes }}
                                                </button>
                                            </small>
                                        </span>

                                        <div class="textareaD align-self-auto mb-auto">
                                            <p>
                                                <textarea name="textarea" rows="" readonly>{{
                                                    comment.content
                                                }}</textarea>
                                            </p>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
